# Data Archiving Reference

## Data Archiving Logic
Data ingested from devices and data generated by stream processing can be archived based on data event time or system time. The generated archive files can be synchronized automatically to the specified storage system as per the storage path information. When setting the storage path, you can determine the file generation mode by selecting to generate the directory by event time or system time.

If you select to generate the directory by the event time, the data content will be parsed and the data event time will be obtained. Then, the data in the same time partition will be written to the same file. Finally, the generated files will be synchronized to the corresponding directory. If you select to generate the directory by the system time, the data in the same time partition will be written to the same file as per the system time stamp of data. Finally, the generated files will be synchronized to the corresponding directory.

## Storage Path Partition Parameters
After specifying the root directory for storing the archive files and the path generation method, you can select different time partition parameter formats. Four time partition parameter formats are supported currently, which are described as follows:

.. list-table::
   :widths: 20 30 50

   * - Parameter Format
     - Description
     - Example
   * - YYYYMMDD
     - Generating directories by day
     - /bucketName/samplePath/20190101/
   * - YYYYMMDD/HH
     - Generating directories by day/hour
     - /bucketName/samplePath/20190101/00/
   * - YYYY/MM/DD
     - Generating directories by year/month/day
     - /bucketName/samplePath/2019/01/01/
   * - YYYY/MM/DD/HH
     - Generating directories by year/month/day/hour
     - /bucketName/samplePath/2019/01/01/00/

## Archiving Cycle Configuration
The archiving cycle determines the time interval to trigger the data archiving jobs. The longer the archiving cycle is, the more data you can be processed in the cycle.

Currently, the data archiving policy supports 1 hour, 6 hours, 12 hours and 24 hours as the archiving cycle. Different archiving cycles mean different scheduled starting time to trigger the archiving jobs as well as different data range. For example:

.. list-table::
   :widths: 20 40 40

   * - Archiving Cycle
     - Scheduled Job Starting Time
     - Archived Data
   * - 1 hour
     - 00:00:00, 01:00:00, 02:00:00, ..., 23:00:00
     - Taking 01:00:00 for example, data to be archived falls in  [00:00:00, 01:00:00).
   * - 6 hours
     - 00:00:00, 06:00:00, 12:00:00, 18:00:00
     - Taking 6:00:00 AM for example, data to be archived falls in [00:00:00, 6:00:00 AM).
   * - 12 hours
     - 00:00:00, 12:00:00
     - Taking 12:00:00 PM for example, data to be archived falls in [00:00:00, 12:00:00 PM).
   * - 24 hours
     - 00:00:00
     - Taking 2019-01-02 00:00:00 for example, data to be archived falls in [2019-01-01 00:00:00, 2019-01-02 00:00:00)

.. note:: The data archiving cycle adopts the system time stamp. If the system time stamp of data is within the current archiving cycle, the data will be archived as per the policy configuration and synchronized to the corresponding storage path.
