# Subscribing to Real-time Data
This guide introduces how to configure real-time data subscription on EnOS Console and consume data with the Java SDK provided by EnOS.

## Prerequisites
- An account to log in EnOS Console.
- Access permission to the Data Subscription module.
- Device connection is completed, and the devices are uploading data to EnOS.
- A workstation with IDE (IDEA or Eclipse) installed.

## About This Task
**Goal**

The goal of this guide is to get the maximum value of the *test_raw* input point within every 5 minutes, out put the value to the output point *test_5min*, and subscribe to the data of both points.

**Data Preparation**

- **Model configuration**: Detailed information about the (*testModel*) for this guide is as follows:

| Feature Type  | Name      | Identifier | Point Type | Data Type |
| ------------- | --------- | ---------- | ---------- | --------- |
| Measure Point | test_raw  | test_raw   | AI         | DOUBLE    |
| Measure Point | test_5min | test_5min  | AI         | DOUBLE    |

.. note:: - In this example, *test_raw* is the input point, and *test_5min* is the output point to receive the output data of stream processing.
        - Ensure that both the input point and the output point are of AI type.

- **Storage configuration**: Configuring the input point *test_raw* as AI raw data and the output point *test_5min* as minute-level normalized AI data. For more information, see [Storage Strategy Configuration](https://www.envisioniot.com/docs/data-asset/en/latest/storage_strategy_overview.html).  
- **Data ingestion**: For information about data ingestion of input point *test_raw*, see [Device Connection](https://www.envisioniot.com/docs/device-connection/en/latest/gettingstarted_device_connection.html).

## Procedure
The steps for subscribing and consuming real-time data are as follows:
- Create and configure a real-time data subscription topic
- Save and enable the subscription topic
- Get subscribed data with Java SDK
- Check the data consumption results

## Step 1. Create and configure a data subscription topic
Log in EnOS Console and select the **Data Subscription** module. All the subscription topics created for the current organization are listed in the table. Take the following steps to create and configure a real-time data subscription topic.
1. **Create topic**: Click the **New Subscription** button and complete the configuration for the topic. For this guide, select **Real-time Data Subscription** as the type.
2. **Subscription ID**: Choose to input or generate an ID for the subscription topic.
3. **Select SA account**: Each consumer instance must have an associated SA account, which can be generated by registering an application on EnOS. For instructions, see [Managing Applications](https://www.envisioniot.com/docs/app-development/en/latest/managing_apps.html).
4. **Select customers to be subscribed**: Each SA can access the data of multiple customers (through purchasing applications). Select the customers whose data are to be subscribed to.
5. **Set model and measure point filter**: Select the model and measure points to be subscribed to. For this guide, select *test_raw* and *test_5min* of the *testModel*. The subscription system will filter data to meet the specified conditions.
6. **Set device tag filter**: Specify tags of devices so that data of the selected devices will be subscribed to.

## Step 2. Save and enable the subscription topic
After the subscription topic is configured, click **Save** to save the configuration. On the **Data Subscription** page, find the saved topic, click the **Enable** icon to run the subscription topic.

## Step 3. Get subscribed data with Java SDK
EnOS provides Java SDK to help developers with offline application development and data consumption.
- Add [Maven dependency](https://mvnrepository.com/artifact/com.envisioniot/enos-subscribe/2.0.0) for the SDK. See the following example:

```
<dependency>
  <groupId>com.envisioniot</groupId>
  <artifactId>enos-subscribe</artifactId>
  <version>2.0.0</version>
</dependency>
```
- Use IDE for offline application development. See the following code sample:

```
String sub_server_host ="sub_server_host";
String sub_server_port ="sub_server_port";
String accessKey ="accessKey";
String accessSecret ="accessSecret";
/* service */
EOSClient eosClient = new EOSClient(sub_server_host, sub_server_port, accessKey, accessSecret);
IDataService dataService = eosClient.getDataService();

/* handler */
IDataHandler dataHandler = new IDataHandler(){
    @Override
    public void dataRead(MeasurePoint point) {
        System.out.println(point);
    }
};
/* subscribe */
dataService.subscribe(dataHandler, subId);

/* subscribe with consumer group */
dataService.subscribe(dataHandler, subId, consumerGroup);
```
.. note:: In this sample, the `sub_server_host` and `sub_server_port` are the host and port of the subscription server, which vary with the cloud region and instance. For private cloud instances, contact your Envision project manager or support representative to get the host and port information.

For more information about the SDK, see [Data Subscription SDK Reference](data_subscription_sdk).

## Step 4. Check the data consumption results

Run the application for data consumption and check the data consumption results in the logs of the application.
